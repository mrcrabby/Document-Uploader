(function(j){var w,t,z=function(h,q){var i=0;this.complete=function(){i+=1;i===q&&h()}};w=function(h){var q=this,i,r,e={namespace:"file_upload",uploadFormFilter:function(){return true},fileInputFilter:function(){return true},cssClass:"file_upload",dragDropSupport:true,dropZone:h,url:function(a){return a.attr("action")},method:function(a){return a.attr("method")},fieldName:function(a){return a.attr("name")},formData:function(a){return a.serializeArray()},multipart:true,multiFileRequest:false,withCredentials:false,
forceIframeUpload:false},k={},l={},o=/^http(s)?:\/\//,p,f=function(){return typeof XMLHttpRequest!=="undefined"&&typeof File!=="undefined"&&(!e.multipart||typeof FormData!=="undefined"||typeof FileReader!=="undefined")},s=function(){if(e.dragDropSupport){if(typeof e.onDocumentDragEnter==="function")k["dragenter."+e.namespace]=function(a){e.onDocumentDragEnter(a)};if(typeof e.onDocumentDragLeave==="function")k["dragleave."+e.namespace]=function(a){e.onDocumentDragLeave(a)};k["dragover."+e.namespace]=
q.onDocumentDragOver;k["drop."+e.namespace]=q.onDocumentDrop;j(document).bind(k);if(typeof e.onDragEnter==="function")l["dragenter."+e.namespace]=function(a){e.onDragEnter(a)};if(typeof e.onDragLeave==="function")l["dragleave."+e.namespace]=function(a){e.onDragLeave(a)};l["dragover."+e.namespace]=q.onDragOver;l["drop."+e.namespace]=q.onDrop;e.dropZone.bind(l)}r.bind("change."+e.namespace,q.onChange)},u=function(){j.each(k,function(a,b){j(document).unbind(a,b)});j.each(l,function(a,b){e.dropZone.unbind(a,
b)});r.unbind("change."+e.namespace)},y=function(a,b,c,d){if(typeof d.onProgress==="function")c.upload.onprogress=function(g){d.onProgress(g,a,b,c,d)};if(typeof d.onLoad==="function")c.onload=function(g){d.onLoad(g,a,b,c,d)};if(typeof d.onAbort==="function")c.onabort=function(g){d.onAbort(g,a,b,c,d)};if(typeof d.onError==="function")c.onerror=function(g){d.onError(g,a,b,c,d)}},x=function(a){if(typeof a.url==="function")return a.url(a.uploadForm||i);return a.url},D=function(a){if(typeof a.method===
"function")return a.method(a.uploadForm||i);return a.method},A=function(a){if(typeof a.fieldName==="function")return a.fieldName(a.fileInput||r);return a.fieldName},B=function(a){var b;if(typeof a.formData==="function")return a.formData(a.uploadForm||i);else if(j.isArray(a.formData))return a.formData;else if(a.formData){b=[];j.each(a.formData,function(c,d){b.push({name:c,value:d})});return b}return[]},J=function(a,b,c){if(c)a.setRequestHeader("X-Requested-With","XMLHttpRequest");else if(b.withCredentials)a.withCredentials=
true;if(j.isArray(b.requestHeaders))j.each(b.requestHeaders,function(d,g){a.setRequestHeader(g[0],g[1])});else b.requestHeaders&&j.each(b.requestHeaders,function(d,g){a.setRequestHeader(d,g)})},K=function(a,b,c){var d=new FormData,g;j.each(B(c),function(m,n){d.append(n.name,n.value)});for(g=0;g<a.length;g+=1)d.append(A(c),a[g]);b.send(d)},L=function(a,b){var c=new FileReader;c.onload=function(d){a.content=d.target.result;b()};c.readAsBinaryString(a)},M=function(a,b,c,d){var g="";j.each(d,function(m,
n){g+="--"+a+'\r\nContent-Disposition: form-data; name="'+unescape(encodeURIComponent(n.name))+'"\r\n\r\n'+unescape(encodeURIComponent(n.value))+"\r\n"});j.each(b,function(m,n){g+="--"+a+'\r\nContent-Disposition: form-data; name="'+unescape(encodeURIComponent(c))+'"; filename="'+unescape(encodeURIComponent(n.name))+'"\r\nContent-Type: '+n.type+"\r\n\r\n"+n.content+"\r\n"});g+="--"+a+"--\r\n";return g},N=function(a,b,c){var d="----MultiPartFormBoundary"+(new Date).getTime(),g,m;b.setRequestHeader("Content-Type",
"multipart/form-data; boundary="+d);g=new z(function(){b.sendAsBinary(M(d,a,A(c),B(c)))},a.length);for(m=0;m<a.length;m+=1)L(a[m],g.complete)},E=function(a,b,c,d){var g=x(d),m;if(o.test(g)){var n=location.host;m=location.protocol.length+2;var v=g.indexOf(n,m);n=v+n.length;m=(v===m||v===g.indexOf("@",m)+1)&&(g.length===n||j.inArray(g.charAt(n),["/","?","#"])!==-1)?true:false}else m=true;y(a,b,c,d);c.open(D(d),g,true);J(c,d,m);if(d.multipart){a=typeof b==="number"?[a[b]]:a;if(typeof FormData!=="undefined")K(a,
c,d);else typeof FileReader!=="undefined"?N(a,c,d):j.error("Browser does neither support FormData nor FileReader interface")}else{d=a[b];m&&c.setRequestHeader("X-File-Name",unescape(encodeURIComponent(d.name)));c.setRequestHeader("Content-Type",d.type);c.send(d)}},F=function(a,b,c,d,g){var m=new XMLHttpRequest,n=j.extend({},e);n.fileInput=c;n.uploadForm=d;typeof n.initUpload==="function"?n.initUpload(a,b,g,m,n,function(){E(b,g,m,n)}):E(b,g,m,n)},G=function(a,b,c,d){var g;if(e.multiFileRequest)F(a,
b,c,d);else for(g=0;g<b.length;g+=1)F(a,b,c,d,g)},O=function(a,b,c){var d=B(c);b.find(":input").not(":disabled").attr("disabled",true).addClass(c.namespace+"_disabled");j.each(d,function(g,m){j('<input type="hidden"/>').attr("name",m.name).val(m.value).addClass(c.namespace+"_form_data").appendTo(b)});a.attr("name",A(c)).appendTo(b)},P=function(a,b,c){a.detach();b.find("."+c.namespace+"_disabled").removeAttr("disabled").removeClass(c.namespace+"_disabled");b.find("."+c.namespace+"_form_data").remove()},
H=function(a,b,c,d){var g=b.attr("action"),m=b.attr("method"),n=b.attr("target");c.unbind("abort").bind("abort",function(v){c.readyState=0;c.unbind("load").attr("src","javascript".concat(":false;"));typeof d.onAbort==="function"&&d.onAbort(v,[{name:a.val(),type:null,size:null}],0,c,d)}).unbind("load").bind("load",function(v){c.readyState=4;typeof d.onLoad==="function"&&d.onLoad(v,[{name:a.val(),type:null,size:null}],0,c,d);j('<iframe src="javascript:false;" style="display:none"></iframe>').appendTo(b).remove()});
b.attr("action",x(d)).attr("method",D(d)).attr("target",c.attr("name"));O(a,b,d);c.readyState=2;b.get(0).submit();P(a,b,d);b.attr("action",g).attr("method",m).attr("target",n)},Q=function(a,b,c){var d=j('<iframe src="javascript:false;" style="display:none" name="iframe_'+e.namespace+"_"+(new Date).getTime()+'"></iframe>'),g=j.extend({},e);g.fileInput=b;g.uploadForm=c;d.readyState=0;d.abort=function(){d.trigger("abort")};d.bind("load",function(){d.unbind("load");typeof g.initUpload==="function"?g.initUpload(a,
[{name:b.val(),type:null,size:null}],0,d,g,function(){H(b,c,d,g)}):H(b,c,d,g)}).appendTo(c)},I=function(){i=(h.is("form")?h:h.find("form")).filter(e.uploadFormFilter)},C=function(){r=i.find("input:file").filter(e.fileInputFilter)};this.onDocumentDragOver=function(a){if(typeof e.onDocumentDragOver==="function"&&e.onDocumentDragOver(a)===false)return false;a.preventDefault()};this.onDocumentDrop=function(a){if(typeof e.onDocumentDrop==="function"&&e.onDocumentDrop(a)===false)return false;a.preventDefault()};
this.onDragOver=function(a){if(typeof e.onDragOver==="function"&&e.onDragOver(a)===false)return false;var b=a.originalEvent.dataTransfer;if(b&&b.files){b.dropEffect=b.effectAllowed="copy";a.preventDefault()}};this.onDrop=function(a){if(typeof e.onDrop==="function"&&e.onDrop(a)===false)return false;var b=a.originalEvent.dataTransfer;b&&b.files&&f()&&G(a,b.files);a.preventDefault()};this.onChange=function(a){if(typeof e.onChange==="function"&&e.onChange(a)===false)return false;var b=j(a.target),c=j(a.target.form);
if(c.length===1){b.data("file_upload_form",c);var d=b.clone(true);j("<form/>").append(d).get(0).reset();b.after(d).detach();C()}else c=b.data("file_upload_form");!e.forceIframeUpload&&a.target.files&&f()?G(a,a.target.files,b,c):Q(a,b,c)};this.init=function(a){if(a){j.extend(e,a);p=a}I();C();if(h.data(e.namespace))j.error('FileUpload with namespace "'+e.namespace+'" already assigned to this element');else{h.data(e.namespace,q).addClass(e.cssClass);e.dropZone.not(h).addClass(e.cssClass);s()}};this.options=
function(a){var b,c,d,g;if(typeof a==="undefined")return j.extend({},e);p&&j.extend(p,a);u();j.each(a,function(m,n){switch(m){case "namespace":j.error("The FileUpload namespace cannot be updated.");return;case "uploadFormFilter":g=d=true;break;case "fileInputFilter":g=true;break;case "cssClass":b=e.cssClass;break;case "dropZone":c=e.dropZone}e[m]=n});d&&I();g&&C();if(typeof b!=="undefined"){h.removeClass(b).addClass(e.cssClass);(c?c:e.dropZone).not(h).removeClass(b);e.dropZone.not(h).addClass(e.cssClass)}else if(c){c.not(h).removeClass(e.cssClass);
e.dropZone.not(h).addClass(e.cssClass)}s()};this.option=function(a,b){var c;if(typeof b==="undefined")return e[a];c={};c[a]=b;q.options(c)};this.destroy=function(){u();h.removeData(e.namespace).removeClass(e.cssClass);e.dropZone.not(h).removeClass(e.cssClass)}};t={init:function(h){return this.each(function(){(new w(j(this))).init(h)})},option:function(h,q,i){i=i?i:"file_upload";var r=j(this).data(i);if(r){if(typeof h==="string")return r.option(h,q);return r.options(h)}else j.error('No FileUpload with namespace "'+
i+'" assigned to this element')},destroy:function(h){h=h?h:"file_upload";return this.each(function(){var q=j(this).data(h);q?q.destroy():j.error('No FileUpload with namespace "'+h+'" assigned to this element')})}};j.fn.fileUpload=function(h){if(t[h])return t[h].apply(this,Array.prototype.slice.call(arguments,1));else if(typeof h==="object"||!h)return t.init.apply(this,arguments);else j.error("Method "+h+" does not exist on jQuery.fileUpload")}})(jQuery);
(function(j){var w,t,z=function(h,q){var i,r;if(!q.test(h.type))return null;i=document.createElement("img");if(typeof URL!=="undefined"&&typeof URL.createObjectURL==="function"){i.src=URL.createObjectURL(h);i.onload=function(){URL.revokeObjectURL(this.src)};return i}if(typeof FileReader!=="undefined"){r=new FileReader;if(typeof r.readAsDataURL==="function"){r.onload=function(e){i.src=e.target.result};r.readAsDataURL(h);return i}}return null};w=function(h,q){var i=this,r,e;this.requestHeaders={Accept:"application/json, text/javascript, */*; q=0.01"};
this.dropZone=h;this.imageTypes=/^image\/(gif|jpeg|png)$/;this.previewSelector=".file_upload_preview";this.progressSelector=".file_upload_progress div";this.cancelSelector=".file_upload_cancel button";this.cssClassSmall="file_upload_small";this.cssClassLarge="file_upload_large";this.cssClassHighlight="file_upload_highlight";this.dropEffect="highlight";this.uploadTable=this.downloadTable=null;this.buildUploadRow=this.buildDownloadRow=function(){return null};this.addNode=function(k,l,o){if(l)l.css("display",
"none").appendTo(k).fadeIn(function(){if(typeof o==="function")try{o()}catch(p){j(this).stop();throw p;}});else typeof o==="function"&&o()};this.removeNode=function(k,l){if(k)k.fadeOut(function(){j(this).remove();if(typeof l==="function")try{l()}catch(o){j(this).stop();throw o;}});else typeof l==="function"&&l()};this.onAbort=function(k,l,o,p,f){f.removeNode(f.uploadRow)};this.cancelUpload=function(k,l,o,p,f){var s=p.readyState;p.abort();if(isNaN(s)||s<2)f.onAbort(k,l,o,p,f)};this.initProgressBar=
function(k,l){if(typeof k.progressbar==="function")return k.progressbar({value:l});else{var o=j('<progress value="'+l+'" max="100"/>').appendTo(k);o.progressbar=function(p,f){o.attr("value",f)};return o}};this.initUploadRow=function(k,l,o,p,f,s){if(k=f.uploadRow=f.buildUploadRow(l,o,f)){f.progressbar=f.initProgressBar(k.find(f.progressSelector),0);k.find(f.cancelSelector).click(function(u){f.cancelUpload(u,l,o,p,f)});k.find(f.previewSelector).each(function(){j(this).append(new z(l[o],f.imageTypes))})}f.addNode(typeof f.uploadTable===
"function"?f.uploadTable(f):f.uploadTable,k,s)};this.initUploadProgress=function(k,l){k.upload||l.progressbar.progressbar("value",100)};this.initUpload=function(k,l,o,p,f,s){f.initUploadRow(k,l,o,p,f,function(){if(typeof f.beforeSend==="function")f.beforeSend(k,l,o,p,f,function(){f.initUploadProgress(p,f);s()});else{f.initUploadProgress(p,f);s()}})};this.onProgress=function(k,l,o,p,f){f.progressbar&&f.progressbar.progressbar("value",parseInt(k.loaded/k.total*100,10))};this.parseResponse=function(k){return typeof k.responseText!==
"undefined"?j.parseJSON(k.responseText):j.parseJSON(k.contents().text())};this.initDownloadRow=function(k,l,o,p,f,s){var u,y;try{u=f.response=f.parseResponse(p);y=f.downloadRow=f.buildDownloadRow(u,f);f.addNode(typeof f.downloadTable==="function"?f.downloadTable(f):f.downloadTable,y,s)}catch(x){if(typeof f.onError==="function"){f.originalEvent=k;f.onError(x,l,o,p,f)}else throw x;}};this.onLoad=function(k,l,o,p,f){k=f.parseResponse(p);j(".dialog-paragraph").append('The server is done processing your document and it is ready to be viewed. Check it out here:<br><a href="'+
k.URL+'">'+k.URL+"</a>");j("#dialog").dialog("open");f.removeNode(f.uploadRow,function(){})};this.dropZoneEnlarge=function(){if(!e){if(typeof i.dropZone.switchClass==="function")i.dropZone.switchClass(i.cssClassSmall,i.cssClassLarge);else{i.dropZone.addClass(i.cssClassLarge);i.dropZone.removeClass(i.cssClassSmall)}e=true}};this.dropZoneReduce=function(){if(typeof i.dropZone.switchClass==="function")i.dropZone.switchClass(i.cssClassLarge,i.cssClassSmall);else{i.dropZone.addClass(i.cssClassSmall);i.dropZone.removeClass(i.cssClassLarge)}e=
false};this.onDocumentDragEnter=function(){i.dropZoneEnlarge()};this.onDocumentDragOver=function(){r&&clearTimeout(r);r=setTimeout(function(){i.dropZoneReduce()},200)};this.onDragEnter=this.onDragLeave=function(){i.dropZone.toggleClass(i.cssClassHighlight)};this.onDrop=function(){r&&clearTimeout(r);if(i.dropEffect&&typeof i.dropZone.effect==="function")i.dropZone.effect(i.dropEffect,function(){i.dropZone.removeClass(i.cssClassHighlight);i.dropZoneReduce()});else{i.dropZone.removeClass(i.cssClassHighlight);
i.dropZoneReduce()}};j.extend(this,q)};t={init:function(h){return this.each(function(){j(this).fileUpload(new w(j(this),h))})},option:function(h,q,i){if(typeof h==="undefined"||typeof h==="string"&&typeof q==="undefined")return j(this).fileUpload("option",h,q,i);return this.each(function(){j(this).fileUpload("option",h,q,i)})},destroy:function(h){return this.each(function(){j(this).fileUpload("destroy",h)})}};j.fn.fileUploadUI=function(h){if(t[h])return t[h].apply(this,Array.prototype.slice.call(arguments,
1));else if(typeof h==="object"||!h)return t.init.apply(this,arguments);else j.error("Method "+h+" does not exist on jQuery.fileUploadUI")}})(jQuery);